{"version":3,"file":"smart-table-search.js","sources":["../../node_modules/smart-table-json-pointer/dist/bundle/module.js","../src/basic.js","../../node_modules/re-template-tag/esm/index.js","../src/regex.js"],"sourcesContent":["const pointer = (path) => {\n    const parts = path.split('.');\n    const partial = (obj = {}, parts = []) => {\n        const p = parts.shift();\n        const current = obj[p];\n        return (current === undefined || current === null || parts.length === 0) ?\n            current : partial(current, parts);\n    };\n    const set = (target, newTree) => {\n        let current = target;\n        const [leaf, ...intermediate] = parts.reverse();\n        for (const key of intermediate.reverse()) {\n            if (current[key] === undefined) {\n                current[key] = {};\n                current = current[key];\n            }\n        }\n        current[leaf] = Object.assign(current[leaf] || {}, newTree);\n        return target;\n    };\n    return {\n        get(target) {\n            return partial(target, [...parts]);\n        },\n        set\n    };\n};\n\nexport { pointer };\n","import { pointer } from 'smart-table-json-pointer';\nexport const basic = (input) => {\n    const { value, scope = [], isCaseSensitive = false } = input;\n    const searchPointers = scope.map(field => pointer(field).get);\n    if (scope.length === 0 || !value) {\n        return (array) => array;\n    }\n    const test = isCaseSensitive === true ? String(value) : String(value).toLowerCase();\n    return (array) => array.filter(item => searchPointers.some(p => {\n        const v = isCaseSensitive === true ? String(p(item)) : String(p(item)).toLowerCase();\n        return v.includes(test);\n    }));\n};\n","export function re(strs, ...substs) {\n    let reStr = transformRaw(strs.raw[0]);\n    for (const [i, subst] of substs.entries()) {\n        if (subst instanceof RegExp) {\n            reStr += subst.source;\n        } else if (typeof subst === 'string') {\n            reStr += quoteText(subst);\n        } else {\n            throw new Error('Illegal substitution: '+subst);\n        }\n        reStr += transformRaw(strs.raw[i+1]);\n    }\n    let flags = '';\n    if (reStr.startsWith('/')) {\n        const lastSlashIndex = reStr.lastIndexOf('/');\n        if (lastSlashIndex === 0) {\n            throw new Error('If the `re` string starts with a slash, it must end with a second slash and zero or more flags: '+reStr);\n        }\n        flags = reStr.slice(lastSlashIndex+1);\n        reStr = reStr.slice(1, lastSlashIndex);\n    }\n    return new RegExp(reStr, flags);\n}\n\nfunction transformRaw(str) {\n    return str.replace(/\\\\`/g, '`');\n}\n\n/**\n * All special characters are escaped, because you may want to quote several characters inside parentheses or square brackets.\n */\nexport function quoteText(text) {\n    return text.replace(/[\\\\^$.*+?()[\\]{}|=!<>:-]/g, '\\\\$&');\n}","import { pointer } from 'smart-table-json-pointer';\nimport { re } from 're-template-tag';\nexport const regexp = (input) => {\n    const { value, scope = [], escape = false, flags = '' } = input;\n    const searchPointers = scope.map(field => pointer(field).get);\n    if (scope.length === 0 || !value) {\n        return (array) => array;\n    }\n    const regex = escape === true ? re `/${value}/${flags}` : new RegExp(value, flags);\n    return (array) => array.filter(item => searchPointers.some(p => regex.test(String(p(item)))));\n};\n"],"names":[],"mappings":";;;IAAA,MAAM,OAAO,GAAG,CAAC,IAAI,KAAK;IAC1B,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAClC,IAAI,MAAM,OAAO,GAAG,CAAC,GAAG,GAAG,EAAE,EAAE,KAAK,GAAG,EAAE,KAAK;IAC9C,QAAQ,MAAM,CAAC,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC;IAChC,QAAQ,MAAM,OAAO,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;IAC/B,QAAQ,OAAO,CAAC,OAAO,KAAK,SAAS,IAAI,OAAO,KAAK,IAAI,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC;IAC/E,YAAY,OAAO,GAAG,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IAC9C,KAAK,CAAC;IACN,IAAI,MAAM,GAAG,GAAG,CAAC,MAAM,EAAE,OAAO,KAAK;IACrC,QAAQ,IAAI,OAAO,GAAG,MAAM,CAAC;IAC7B,QAAQ,MAAM,CAAC,IAAI,EAAE,GAAG,YAAY,CAAC,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;IACxD,QAAQ,KAAK,MAAM,GAAG,IAAI,YAAY,CAAC,OAAO,EAAE,EAAE;IAClD,YAAY,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,SAAS,EAAE;IAC5C,gBAAgB,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;IAClC,gBAAgB,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;IACvC,aAAa;IACb,SAAS;IACT,QAAQ,OAAO,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,OAAO,CAAC,CAAC;IACpE,QAAQ,OAAO,MAAM,CAAC;IACtB,KAAK,CAAC;IACN,IAAI,OAAO;IACX,QAAQ,GAAG,CAAC,MAAM,EAAE;IACpB,YAAY,OAAO,OAAO,CAAC,MAAM,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;IAC/C,SAAS;IACT,QAAQ,GAAG;IACX,KAAK,CAAC;IACN,CAAC,CAAC;;ACzBU,UAAC,KAAK,GAAG,CAAC,KAAK,KAAK;IAChC,IAAI,MAAM,EAAE,KAAK,EAAE,KAAK,GAAG,EAAE,EAAE,eAAe,GAAG,KAAK,EAAE,GAAG,KAAK,CAAC;IACjE,IAAI,MAAM,cAAc,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC;IAClE,IAAI,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE;IACtC,QAAQ,OAAO,CAAC,KAAK,KAAK,KAAK,CAAC;IAChC,KAAK;IACL,IAAI,MAAM,IAAI,GAAG,eAAe,KAAK,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,CAAC;IACxF,IAAI,OAAO,CAAC,KAAK,KAAK,KAAK,CAAC,MAAM,CAAC,IAAI,IAAI,cAAc,CAAC,IAAI,CAAC,CAAC,IAAI;IACpE,QAAQ,MAAM,CAAC,GAAG,eAAe,KAAK,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;IAC7F,QAAQ,OAAO,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IAChC,KAAK,CAAC,CAAC,CAAC;IACR,CAAC;;ICZM,SAAS,EAAE,CAAC,IAAI,EAAE,GAAG,MAAM,EAAE;IACpC,IAAI,IAAI,KAAK,GAAG,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1C,IAAI,KAAK,MAAM,CAAC,CAAC,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,EAAE,EAAE;IAC/C,QAAQ,IAAI,KAAK,YAAY,MAAM,EAAE;IACrC,YAAY,KAAK,IAAI,KAAK,CAAC,MAAM,CAAC;IAClC,SAAS,MAAM,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;IAC9C,YAAY,KAAK,IAAI,SAAS,CAAC,KAAK,CAAC,CAAC;IACtC,SAAS,MAAM;IACf,YAAY,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;IAC5D,SAAS;IACT,QAAQ,KAAK,IAAI,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7C,KAAK;IACL,IAAI,IAAI,KAAK,GAAG,EAAE,CAAC;IACnB,IAAI,IAAI,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;IAC/B,QAAQ,MAAM,cAAc,GAAG,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;IACtD,QAAQ,IAAI,cAAc,KAAK,CAAC,EAAE;IAClC,YAAY,MAAM,IAAI,KAAK,CAAC,kGAAkG,CAAC,KAAK,CAAC,CAAC;IACtI,SAAS;IACT,QAAQ,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;IAC9C,QAAQ,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC;IAC/C,KAAK;IACL,IAAI,OAAO,IAAI,MAAM,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IACpC,CAAC;;IAED,SAAS,YAAY,CAAC,GAAG,EAAE;IAC3B,IAAI,OAAO,GAAG,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;IACpC,CAAC;;IAED;IACA;IACA;AACA,IAAO,SAAS,SAAS,CAAC,IAAI,EAAE;IAChC,IAAI,OAAO,IAAI,CAAC,OAAO,CAAC,2BAA2B,EAAE,MAAM,CAAC,CAAC;IAC7D;;KAAC,LC/BW,UAAC,MAAM,GAAG,CAAC,KAAK,KAAK;IACjC,IAAI,MAAM,EAAE,KAAK,EAAE,KAAK,GAAG,EAAE,EAAE,MAAM,GAAG,KAAK,EAAE,KAAK,GAAG,EAAE,EAAE,GAAG,KAAK,CAAC;IACpE,IAAI,MAAM,cAAc,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC;IAClE,IAAI,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE;IACtC,QAAQ,OAAO,CAAC,KAAK,KAAK,KAAK,CAAC;IAChC,KAAK;IACL,IAAI,MAAM,KAAK,GAAG,MAAM,KAAK,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,IAAI,MAAM,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IACvF,IAAI,OAAO,CAAC,KAAK,KAAK,KAAK,CAAC,MAAM,CAAC,IAAI,IAAI,cAAc,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClG,CAAC;;;;;;;;;;;"}