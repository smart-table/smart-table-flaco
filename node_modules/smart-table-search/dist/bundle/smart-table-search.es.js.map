{"version":3,"file":"smart-table-search.es.js","sources":["../../node_modules/smart-table-json-pointer/dist/bundle/module.js","../src/basic.js","../../node_modules/re-template-tag/esm/index.js","../src/regex.js"],"sourcesContent":["const pointer = (path) => {\n    const parts = path.split('.');\n    const partial = (obj = {}, parts = []) => {\n        const p = parts.shift();\n        const current = obj[p];\n        return (current === undefined || current === null || parts.length === 0) ?\n            current : partial(current, parts);\n    };\n    const set = (target, newTree) => {\n        let current = target;\n        const [leaf, ...intermediate] = parts.reverse();\n        for (const key of intermediate.reverse()) {\n            if (current[key] === undefined) {\n                current[key] = {};\n                current = current[key];\n            }\n        }\n        current[leaf] = Object.assign(current[leaf] || {}, newTree);\n        return target;\n    };\n    return {\n        get(target) {\n            return partial(target, [...parts]);\n        },\n        set\n    };\n};\n\nexport { pointer };\n","import { pointer } from 'smart-table-json-pointer';\nexport const basic = (input) => {\n    const { value, scope = [], isCaseSensitive = false } = input;\n    const searchPointers = scope.map(field => pointer(field).get);\n    if (scope.length === 0 || !value) {\n        return (array) => array;\n    }\n    const test = isCaseSensitive === true ? String(value) : String(value).toLowerCase();\n    return (array) => array.filter(item => searchPointers.some(p => {\n        const v = isCaseSensitive === true ? String(p(item)) : String(p(item)).toLowerCase();\n        return v.includes(test);\n    }));\n};\n","export function re(strs, ...substs) {\n    let reStr = transformRaw(strs.raw[0]);\n    for (const [i, subst] of substs.entries()) {\n        if (subst instanceof RegExp) {\n            reStr += subst.source;\n        } else if (typeof subst === 'string') {\n            reStr += quoteText(subst);\n        } else {\n            throw new Error('Illegal substitution: '+subst);\n        }\n        reStr += transformRaw(strs.raw[i+1]);\n    }\n    let flags = '';\n    if (reStr.startsWith('/')) {\n        const lastSlashIndex = reStr.lastIndexOf('/');\n        if (lastSlashIndex === 0) {\n            throw new Error('If the `re` string starts with a slash, it must end with a second slash and zero or more flags: '+reStr);\n        }\n        flags = reStr.slice(lastSlashIndex+1);\n        reStr = reStr.slice(1, lastSlashIndex);\n    }\n    return new RegExp(reStr, flags);\n}\n\nfunction transformRaw(str) {\n    return str.replace(/\\\\`/g, '`');\n}\n\n/**\n * All special characters are escaped, because you may want to quote several characters inside parentheses or square brackets.\n */\nexport function quoteText(text) {\n    return text.replace(/[\\\\^$.*+?()[\\]{}|=!<>:-]/g, '\\\\$&');\n}","import { pointer } from 'smart-table-json-pointer';\nimport { re } from 're-template-tag';\nexport const regexp = (input) => {\n    const { value, scope = [], escape = false, flags = '' } = input;\n    const searchPointers = scope.map(field => pointer(field).get);\n    if (scope.length === 0 || !value) {\n        return (array) => array;\n    }\n    const regex = escape === true ? re `/${value}/${flags}` : new RegExp(value, flags);\n    return (array) => array.filter(item => searchPointers.some(p => regex.test(String(p(item)))));\n};\n"],"names":[],"mappings":"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"}